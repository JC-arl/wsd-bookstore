# ========================================
# Local Development Environment
# ========================================

########################################
# JWT Configuration (Token expiration)
########################################
jwt.secret=${JWT_SECRET}
# Access Token expiration: 1 hour (3600000ms)
jwt.access-token-expire-time=${JWT_AT_EXPIRE:3600000}
# Refresh Token expiration: 7 days (604800000ms)
jwt.refresh-token-expire-time=${JWT_RT_EXPIRE:604800000}

########################################
# Redis Configuration (Token storage)
########################################
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.timeout=60000

########################################
# MySQL Database (Local Development)
########################################
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/bookstore?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul}
spring.datasource.username=${DB_USERNAME:bookstore_user}
spring.datasource.password=${DB_PASSWORD:password}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

########################################
# JPA / Hibernate Configuration
########################################
# validate: Flyway manages schema, check entity-DB consistency
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Disable OSIV to prevent N+1 query issues (use EntityGraph)
spring.jpa.open-in-view=false

########################################
# Flyway Migration
########################################
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
